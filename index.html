<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendors S.A. | Futuro Digital</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí†</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. VARIABLES & RESET --- */
        :root {
            --bg-main: #050505;
            --bg-glass: rgba(20, 20, 20, 0.7);
            --neon-blue: #2de2e6;
            --neon-purple: #9700cc;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --card-border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Space Grotesk', sans-serif; }
        body { background-color: var(--bg-main); color: var(--text-main); overflow-x: hidden; }

        /* --- 2. INTERFAZ Y COMPONENTES --- */
        
        /* Notificaciones TOAST (Reemplazo de Alerts) */
        #toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
        .toast {
            background: rgba(10, 10, 10, 0.9); border-left: 4px solid var(--neon-blue);
            color: white; padding: 15px 25px; border-radius: 4px; min-width: 250px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); backdrop-filter: blur(10px);
            animation: slideIn 0.3s ease-out; display: flex; align-items: center; gap: 10px;
        }
        .toast.error { border-color: #ff3333; }
        .toast.success { border-color: #00ff00; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Header */
        header {
            position: fixed; top: 0; width: 100%; padding: 20px 5%;
            display: flex; justify-content: space-between; align-items: center;
            background: var(--bg-glass); backdrop-filter: blur(10px);
            z-index: 1000; border-bottom: 1px solid var(--card-border);
        }
        .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: 2px; }
        .logo span { color: var(--neon-blue); }

        /* Botones */
        .btn {
            padding: 10px 25px; border: none; border-radius: 50px; cursor: pointer;
            font-weight: 700; transition: 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
        }
        .btn-primary { background: var(--neon-blue); color: #000; box-shadow: 0 0 15px rgba(45, 226, 230, 0.3); }
        .btn-primary:hover { box-shadow: 0 0 25px rgba(45, 226, 230, 0.6); transform: scale(1.05); }
        
        /* Hero Section */
        .hero {
            height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; background: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #000 70%);
            padding: 20px;
        }
        .hero h1 { font-size: 4rem; margin-bottom: 20px; line-height: 1.1; }
        .gradient-text {
            background: linear-gradient(to right, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* --- 3. PANEL DE ADMINISTRADOR (MODO DIOS) --- */
        #adminOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 2000;
            display: none; /* Oculto por defecto */
            flex-direction: column; padding: 40px; overflow-y: auto;
        }
        .admin-nav { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 1px solid var(--neon-purple); padding-bottom: 20px; }
        .msg-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .msg-card {
            background: #111; border: 1px solid var(--card-border); padding: 20px; border-radius: 8px;
            position: relative; transition: 0.3s;
        }
        .msg-card:hover { border-color: var(--neon-purple); }
        
        /* --- 4. FORMULARIO FLOTANTE --- */
        .contact-section { padding: 100px 10%; }
        .glass-form {
            background: rgba(255,255,255,0.03); padding: 40px; border-radius: 20px;
            border: 1px solid var(--card-border); max-width: 600px; margin: 0 auto;
        }
        .input-box { margin-bottom: 20px; position: relative; }
        .input-box input, .input-box select, .input-box textarea {
            width: 100%; padding: 15px; background: rgba(0,0,0,0.3); border: 1px solid var(--card-border);
            color: white; border-radius: 8px; outline: none; transition: 0.3s;
        }
        .input-box input:focus, .input-box textarea:focus { border-color: var(--neon-blue); }

        /* Responsive */
        @media(max-width:768px){ .hero h1{font-size: 2.5rem;} header{padding: 15px 20px;} }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <div id="adminOverlay">
        <div class="admin-nav">
            <h2 class="gradient-text"><i class="fa-solid fa-database"></i> BASE DE DATOS</h2>
            <button onclick="cerrarAdmin()" class="btn" style="border: 1px solid white; color: white;">Cerrar Panel</button>
        </div>
        <div id="msgContainer" class="msg-grid">
            <p>Conectando con Firestore...</p>
        </div>
    </div>

    <header>
        <div class="logo">VENDORS<span>.SA</span></div>
        <div id="authContainer">
            <button id="loginBtn" class="btn btn-primary"><i class="fa-brands fa-google"></i> Acceder</button>
            <div id="userProfile" style="display:none; align-items:center; gap:10px;">
                <img id="userImg" src="" style="width:35px; height:35px; border-radius:50%; border:2px solid var(--neon-blue);">
                <button id="adminBtn" class="btn" style="background:var(--neon-purple); color:white; font-size:0.8rem; padding:5px 15px; display:none;">ADMIN</button>
            </div>
        </div>
    </header>

    <section class="hero">
        <h1>TECNOLOG√çA <br><span class="gradient-text">INTELIGENTE</span></h1>
        <p style="color:var(--text-muted); max-width: 600px; margin: 20px 0;">
            Desarrollamos ecosistemas digitales. Desde inventarios en tiempo real hasta sistemas POS avanzados.
        </p>
        <a href="#contact" class="btn btn-primary">Iniciar Proyecto</a>
    </section>

    <section id="contact" class="contact-section">
        <h2 style="text-align: center; margin-bottom: 40px;">SOLICITUD DE SERVICIO</h2>
        <div class="glass-form">
            <form id="contactForm">
                <div class="input-box">
                    <input type="text" id="name" placeholder="Nombre Completo" required>
                </div>
                <div class="input-box">
                    <input type="email" id="email" placeholder="Correo Electr√≥nico" required>
                </div>
                <div class="input-box">
                    <select id="service">
                        <option value="Inventario">Sistema de Inventario (FCI Log)</option>
                        <option value="Web">Desarrollo Web</option>
                        <option value="POS">Sistema de Ventas</option>
                    </select>
                </div>
                <div class="input-box">
                    <textarea id="message" rows="4" placeholder="Describe tu proyecto..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;">
                    ENVIAR DATOS <i class="fa-solid fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </section>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, deleteDoc, doc, Timestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // Configuraci√≥n
        const firebaseConfig = {
            apiKey: "AIzaSyDS75-IATmc4vgELtbsAwyHyAfPLLWv0kI",
            authDomain: "portafolio-36b3a.firebaseapp.com",
            projectId: "portafolio-36b3a",
            storageBucket: "portafolio-36b3a.firebasestorage.app",
            messagingSenderId: "198114342515",
            appId: "1:198114342515:web:57a32c2a612155f7ae5c06"
        };

        // Init
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        
        // --- TU CORREO DE ADMIN ---
        const ADMIN_EMAIL = "emanuel.cedeno1234@gmail.com";

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const userProfile = document.getElementById('userProfile');
        const adminBtn = document.getElementById('adminBtn');
        const adminOverlay = document.getElementById('adminOverlay');

        // 1. SISTEMA DE NOTIFICACIONES (TOAST)
        window.showToast = (msg, type = 'neutral') => {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            let icon = type === 'success' ? '<i class="fa-solid fa-check-circle"></i>' : 
                       type === 'error' ? '<i class="fa-solid fa-circle-exclamation"></i>' : 
                       '<i class="fa-solid fa-info-circle"></i>';
            
            toast.innerHTML = `${icon} <span>${msg}</span>`;
            container.appendChild(toast);
            
            // Sonido sutil (opcional)
            // const audio = new Audio('path/to/sound.mp3'); audio.play();

            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        };

        // 2. AUTENTICACI√ìN
        loginBtn.addEventListener('click', () => {
            signInWithPopup(auth, provider)
                .then(res => showToast(`Bienvenido, ${res.user.displayName}`, 'success'))
                .catch(err => showToast(`Error Login: ${err.message}`, 'error'));
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                loginBtn.style.display = 'none';
                userProfile.style.display = 'flex';
                document.getElementById('userImg').src = user.photoURL;
                
                // Autocompletar form
                document.getElementById('name').value = user.displayName;
                document.getElementById('email').value = user.email;

                // Verificar Admin
                if(user.email === ADMIN_EMAIL){
                    adminBtn.style.display = 'block';
                    adminBtn.onclick = () => {
                        adminOverlay.style.display = 'flex';
                        cargarMensajes();
                    };
                }
            }
        });

        window.cerrarAdmin = () => adminOverlay.style.display = 'none';

        // 3. ENVIAR FORMULARIO (MANEJO DE ERRORES MEJORADO)
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Enviando...';
            btn.disabled = true;

            try {
                await addDoc(collection(db, "solicitudes"), {
                    nombre: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    servicio: document.getElementById('service').value,
                    mensaje: document.getElementById('message').value,
                    fecha: Timestamp.now()
                });
                
                showToast('Solicitud enviada correctamente a la Base de Datos', 'success');
                e.target.reset();

            } catch (error) {
                console.error("Error Firestore:", error);
                if (error.code === 'permission-denied') {
                    showToast('Error de Permisos: Habilita Firestore en la consola.', 'error');
                } else {
                    showToast('Error al conectar con el servidor.', 'error');
                }
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        // 4. CARGAR MENSAJES (SOLO ADMIN)
        function cargarMensajes() {
            const container = document.getElementById('msgContainer');
            const q = query(collection(db, "solicitudes"), orderBy("fecha", "desc"));
            
            onSnapshot(q, (snapshot) => {
                container.innerHTML = '';
                if(snapshot.empty) {
                    container.innerHTML = '<p style="color:#aaa;">No hay mensajes nuevos.</p>';
                    return;
                }

                snapshot.forEach(docSnap => {
                    const data = docSnap.data();
                    const div = document.createElement('div');
                    div.className = 'msg-card';
                    div.innerHTML = `
                        <h3 style="color:var(--neon-blue);">${data.nombre}</h3>
                        <p style="color:#888; font-size:0.9rem;">${data.servicio} | ${data.email}</p>
                        <hr style="border-color:rgba(255,255,255,0.1); margin:10px 0;">
                        <p>${data.mensaje}</p>
                        <div style="margin-top:15px; text-align:right;">
                             <button onclick="borrar('${docSnap.id}')" style="background:none; border:1px solid red; color:red; padding:5px 10px; cursor:pointer;">Borrar</button>
                             <a href="mailto:${data.email}" style="background:var(--neon-blue); color:black; padding:5px 10px; text-decoration:none;">Responder</a>
                        </div>
                    `;
                    container.appendChild(div);
                });
            }, (error) => {
                 container.innerHTML = `<p style="color:red">Error cargando mensajes: ${error.message}</p>`;
            });
        }

        window.borrar = async (id) => {
            if(confirm("¬øBorrar mensaje?")) {
                await deleteDoc(doc(db, "solicitudes", id));
                showToast('Mensaje eliminado', 'success');
            }
        }
    </script>
</body>
</html>
